---

title: Title

keywords: fastai
sidebar: home_sidebar

summary: "summary"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="n">load_ext</span> <span class="n">autoreload</span>
<span class="o">%</span><span class="n">autoreload</span> <span class="mi">2</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Welcome-to-analytics_toolbox-aka-atb">Welcome to <code>analytics_toolbox</code> aka <code>atb</code><a class="anchor-link" href="#Welcome-to-analytics_toolbox-aka-atb">&#182;</a></h1><h3 id="Enabling-Data-Scientists-to-amplify-their-inner-Data-Engineer.">Enabling Data Scientists to amplify their inner Data Engineer.<a class="anchor-link" href="#Enabling-Data-Scientists-to-amplify-their-inner-Data-Engineer.">&#182;</a></h3><blockquote><p>A toolbox for managing data coming from multiple Postgres, Redshift &amp; S3 data sources while performing Analytics and Research. We also have some functionality that help users build Slack Bots.</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install-Us"><a href="https://pypi.org/project/analytics-toolbox/">Install Us</a><a class="anchor-link" href="#Install-Us">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>pip install analytics_toolbox</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Documentation"><a href="https://htpeter.github.io/analytics_toolbox/">Documentation</a><a class="anchor-link" href="#Documentation">&#182;</a></h2><p>Our docs are currently useless as of 2020-02-12.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Vote-For-Change!"><a href="https://github.com/htpeter/analytics_toolbox/issues">Vote For Change!</a><a class="anchor-link" href="#Vote-For-Change!">&#182;</a></h2><p>I'll see your comments on GitHub.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Support-Us">Support Us<a class="anchor-link" href="#Support-Us">&#182;</a></h2><p>Coming someday, maybe?</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Do-You-Know-About-config-Files?">Do You Know About config Files?<a class="anchor-link" href="#Do-You-Know-About-config-Files?">&#182;</a></h1><p><code>analytics_toolbox</code> is only made possible by its reliance on standardized credential storage. You wanna use us, you sadly must play by some of our rules.</p>
<p>We read and build classes via the variable names in the config files you pass to our code. Trust us. Its worth it. You'll end up saving 100s of lines of code by simply passing 1 to 2 arguments when instantiating our primary classes.</p>
<p><a href="https://en.wikipedia.org/wiki/Configuration_file">Config Files</a> are a great way to store information. We chose this over other options like json or OS level environment variables for no clear reason. If you really want support for other credential formats, <a href="https://github.com/htpeter/analytics_toolbox/issues/1">vote with your words here</a>.</p>
<h2 id="Config-File-Format-Guidelines">Config File Format Guidelines<a class="anchor-link" href="#Config-File-Format-Guidelines">&#182;</a></h2><h3 id="Postgres-+-Redshift-Connections">Postgres + Redshift Connections<a class="anchor-link" href="#Postgres-+-Redshift-Connections">&#182;</a></h3><p>If your config file section has a <code>hostname</code>, <code>port</code>, <code>database</code> and <code>user</code> sections, then we'll parse it as a Redshift/Postgres database. You store your password in <code>.pgpass</code> (see below if this is new).</p>
<p>Here is an example of Postgres/Redshift entries.
<code>"</code>"</p>

<pre><code>[dev_db]
hostname = dev.yourhost.com
port = 5432
database = dbname 
user = htpeter

[prod_db]
hostname = prod.yourhost.com
port = 5432
database = dbname 
user = htpeter</code></pre>
<h4 id="What-is-.pgpass?">What is .pgpass?<a class="anchor-link" href="#What-is-.pgpass?">&#182;</a></h4><p>When python's <code>psycopg2</code> or even <code>psql</code> attempt to connect to a server, they will look in a file called  <code>~/.pgpass</code>. If they find matching server information, based on the target they are connecting  to, they use that password.</p>
<p><code>~/.pgpass</code>'s format is simple. Include a line in the file that follows the following format.</p>

<pre><code>hostname:port:database:username:password</code></pre>
<p>Ensure you limit the permissions on this file using <code>chmod 600 ~/.pgpass</code>, otherwise no tools will use it due to its insecurity.</p>
<p>You don't pass database passwords to <code>analytics_toolbox</code>. Instead we leverage <a href="https://www.postgresql.org/docs/9.3/libpq-pgpass.html">pgpass</a>. Simply paste a record for each database in a text file <code>~/.pgpass</code> with the following information.</p>
<h3 id="Slack-Connections">Slack Connections<a class="anchor-link" href="#Slack-Connections">&#182;</a></h3><p>Our Slack APIs use <a href="https://slack.com/help/articles/215770388-Create-and-regenerate-API-tokens#bot-user-tokens">Slack Bot OAuth Tokens</a>.</p>
<p>Create an OAuth token and save it to a variable called <code>bot_user_oauth_token</code>. You can store the token in a config section named whatever you want.</p>

<pre><code>[company_slack]
oauth_token = 943f-1ji23ojf-43gjio3j4gio2-2fjoi23jfi23hio

[personal_slack]
oauth_token = 943f-dfase3-basf234234-fw4230kf230kf023k023</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Usage-Examples">Usage Examples<a class="anchor-link" href="#Usage-Examples">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Querying-Multiple-Databases-&amp;-Moving-Data">Querying Multiple Databases &amp; Moving Data<a class="anchor-link" href="#Querying-Multiple-Databases-&amp;-Moving-Data">&#182;</a></h3><p>Our import is both useful and classy enough to be jammed up at the top with your<code>pd</code>s, <code>np</code>s  and <code>plt</code>s.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">analytics_toolbox</span> <span class="k">as</span> <span class="nn">atb</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And then you simply create a database pool object with your Config File. It loads up all the goodies.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">db</span> <span class="o">=</span> <span class="n">atb</span><span class="o">.</span><span class="n">DBConnector</span><span class="p">(</span><span class="s1">&#39;../atb_config_template.ini&#39;</span><span class="p">)</span>

<span class="n">db</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{   &#39;dev_db&#39;: &lt;analytics_toolbox.connector.DatabaseConnection object at 0x11698bc88&gt;,
    &#39;prod_db&#39;: &lt;analytics_toolbox.connector.DatabaseConnection object at 0x1169d8198&gt;}</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now we can query any of our databasese easily!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># reference with the config file keyname </span>
<span class="n">db</span><span class="p">[</span><span class="s1">&#39;dev_db&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">qry</span><span class="p">(</span><span class="s1">&#39;select * from pg_class limit 5&#39;</span><span class="p">)</span>
<span class="n">db</span><span class="p">[</span><span class="s1">&#39;prod_db&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">qry</span><span class="p">(</span><span class="s1">&#39;select * from pg_class limit 5&#39;</span><span class="p">)</span>

<span class="c1"># or if config file section is pythonic, use its name just like pandas!</span>
<span class="n">db</span><span class="o">.</span><span class="n">dev_db</span><span class="o">.</span><span class="n">qry</span><span class="p">(</span><span class="s1">&#39;select * from pg_class limit 5&#39;</span><span class="p">)</span>
<span class="n">db</span><span class="o">.</span><span class="n">prod_db</span><span class="o">.</span><span class="n">qry</span><span class="p">(</span><span class="s1">&#39;select * from pg_class limit 5&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>
 

